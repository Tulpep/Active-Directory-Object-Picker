# http://www.appveyor.com/docs/appveyor-yml

image: Visual Studio 2019

# version format
version: 2.3.{build}

# Fix line endings in Windows. (runs before repo cloning)
init:
  - git config --global core.autocrlf input

# modify version in csproj
dotnet_csproj:
  patch: true
  file: '**\*.csproj'
  version: '{version}'
  package_version: '{version}'
  assembly_version: '{version}'
  file_version: '{version}'
  informational_version: '{version}'

build_script:
  - cmd: msbuild -p:Configuration=Release;TargetEarlyVersions=true
  - cmd: dotnet build -c Release

after_build:
  - ps: .\Nuget\build.ps1

artifacts:
  - path: '**\Tulpep.ActiveDirectoryObjectPicker*.nupkg'
    name: Tulpep.ActiveDirectoryObjectPicker.nupkg

#Publish NuGet
deploy:
  provider: NuGet
  api_key:
    secure: WALEGnw+g6U2njECiTL7xg47/rbkW5V2iwrFNV+XBTRGUdbGnx1CPgVTbBPPiQ93
  artifact: /.*\.nupkg/
  on:
    branch: master
